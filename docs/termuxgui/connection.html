<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>termuxgui.connection API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>termuxgui.connection</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from socket import socket, AF_UNIX, SOCK_STREAM, timeout, SOL_SOCKET, SO_PEERCRED
from subprocess import run, DEVNULL
from secrets import choice
from string import ascii_letters, digits
from os import getuid
from struct import unpack
from json import dumps
from select import select
from typing import TypedDict, Literal, Optional, Any, Union, Iterator

from termuxgui.event import Event
import termuxgui.msg as tgmsg


def _check_user(s):
    uid = unpack(&#34;III&#34;, s.getsockopt(SOL_SOCKET, SO_PEERCRED, 12))[1]
    return uid == getuid()


class ConfigDarkMode(TypedDict, total=False):
    dark_mode: bool


class Configuration(ConfigDarkMode, TypedDict):
    country: str
    language: str
    orientation: Literal[&#34;landscape&#34;, &#34;portrait&#34;]
    keyboardHidden: bool
    screenwidth: int
    screenheight: int
    fontscale: float
    density: float
    

class Connection:
    &#34;&#34;&#34;This represents a connection to the Termux:GUI plugin and contains all functions that don&#39;t act on any
    particular View, Activity or Task. &#34;&#34;&#34;

    def __init__(self):
        &#34;&#34;&#34;When a connection can&#39;t be established, a RuntimeError is raised.&#34;&#34;&#34;
        adrMain = &#39;&#39;.join(choice(ascii_letters + digits) for i in range(50))
        adrEvent = &#39;&#39;.join(choice(ascii_letters + digits) for i in range(50))
        mainss = socket(AF_UNIX, SOCK_STREAM)
        eventss = socket(AF_UNIX, SOCK_STREAM)
        with mainss, eventss:
            mainss.bind(&#39;\0&#39; + adrMain)
            eventss.bind(&#39;\0&#39; + adrEvent)
            mainss.listen(1)
            eventss.listen(1)
            mainss.settimeout(5)
            eventss.settimeout(5)
            run([&#34;am&#34;, &#34;broadcast&#34;, &#34;-n&#34;, &#34;com.termux.gui/.GUIReceiver&#34;, &#34;--es&#34;, &#34;mainSocket&#34;, adrMain, &#34;--es&#34;,
                 &#34;eventSocket&#34;, adrEvent], stdout=DEVNULL, stderr=DEVNULL)
            try:
                main = mainss.accept()[0]
                try:
                    event = eventss.accept()[0]
                    try:
                        # check for the termux uid to see if it is really the plugin that has connected
                        if not _check_user(main) or not _check_user(event):
                            main.close()
                            event.close()
                            raise RuntimeError(&#34;Plugin doesn&#39;t have the same UID&#34;)
                        main.sendall(b&#39;\x01&#39;)
                        ret = b&#39;&#39;
                        while len(ret) == 0:
                            ret = ret + main.recv(1)
                        if ret[0] != 0:
                            main.close()
                            event.close()
                            raise RuntimeError(&#34;Invalid Protocol version response&#34;)
                        self._main = main
                        self._event = event
                    except Exception as e:
                        event.close()
                        raise e
                except Exception as e:
                    main.close()
                    raise e
            except timeout:
                raise RuntimeError(&#34;Could not connect to Termux:GUI. Is the plugin installed?&#34;)

    def events(self) -&gt; Iterator[Event]:
        &#34;&#34;&#34;Waits for events. Use this with &#34;for in&#34; to iterate over incoming events and block while waiting.&#34;&#34;&#34;
        while True:
            yield Event(tgmsg.read_msg(self._event))

    def checkevent(self) -&gt; Optional[Event]:
        &#34;&#34;&#34;If there is at least one event to be read, returns it.
        If there is no event, returns None.
        You can use this to e.g. check for events between drawing a frame instead of
        having to use a separate thread and blocking it.&#34;&#34;&#34;
        r, _, _ = select([self._event], [], [], 0)
        if len(r) != 0:
            return Event(tgmsg.read_msg(self._event))

    def toast(self, text: str, long: bool = False):
        &#34;&#34;&#34;Sends a Toast. Set long to True if you want to display the text for longer.&#34;&#34;&#34;
        self.send_msg({&#34;method&#34;: &#34;toast&#34;, &#34;params&#34;: {&#34;text&#34;: text, &#34;long&#34;: long}})

    def totermux(self):
        &#34;&#34;&#34;Returns to the termux task. This is a shorthand for running &#34;am start&#34; to start the termux activity.&#34;&#34;&#34;
        run([&#34;am&#34;, &#34;start&#34;, &#34;-n&#34;, &#34;com.termux/.app.TermuxActivity&#34;], stdout=DEVNULL, stderr=DEVNULL)

    def close(self):
        &#34;&#34;&#34;Closes the connection.

        The connection is automatically closed when the program exits, but it&#39;s good practice to close the connection
        yourself when you don&#39;t need it anymore or use a &#34;with&#34; statement.&#34;&#34;&#34;
        self._main.close()
        self._event.close()

    def __enter__(self):
        return self

    def __exit__(self, type, value, traceback):
        self.close()
        return False

    def send_msg(self, msg: Union[str, dict]):
        &#34;&#34;&#34;Send a message to the main socket.
        You should only need to call this yourself if you want to use methods not yet implemented in the library.&#34;&#34;&#34;
        if type(msg) is dict:
            msg = dumps(msg)
        tgmsg.send_msg(self._main, msg)

    def read_msg(self) -&gt; Any:
        &#34;&#34;&#34;Read a message from the main socket.
        You should only need to call this yourself if you want to use methods not yet implemented in the library.&#34;&#34;&#34;
        return tgmsg.read_msg(self._main)

    def send_read_msg(self, msg: Union[str, dict]):
        &#34;&#34;&#34;Send a message to the main socket and read a message afterwards.
        You should only need to call this yourself if you want to use methods not yet implemented in the library.&#34;&#34;&#34;
        self.send_msg(msg)
        return self.read_msg()

    def turnscreenon(self):
        &#34;&#34;&#34;Turns the screen on.&#34;&#34;&#34;
        self.send_msg({&#34;method&#34;: &#34;turnScreenOn&#34;, &#34;params&#34;: {}})

    def islocked(self) -&gt; bool:
        &#34;&#34;&#34;Returns whether the device is locked.&#34;&#34;&#34;
        return self.send_read_msg({&#34;method&#34;: &#34;isLocked&#34;, &#34;params&#34;: {}})

    def getversion(self) -&gt; bool:
        &#34;&#34;&#34;Returns the version code of the plugin app.
        Can be used to disable features only present in a newer version or prompting the user to update.&#34;&#34;&#34;
        return self.send_read_msg({&#34;method&#34;: &#34;getVersion&#34;, &#34;params&#34;: {}})</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="termuxgui.connection.ConfigDarkMode"><code class="flex name class">
<span>class <span class="ident">ConfigDarkMode</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>dict() -&gt; new empty dictionary
dict(mapping) -&gt; new dictionary initialized from a mapping object's
(key, value) pairs
dict(iterable) -&gt; new dictionary initialized as if via:
d = {}
for k, v in iterable:
d[k] = v
dict(**kwargs) -&gt; new dictionary initialized with the name=value pairs
in the keyword argument list.
For example:
dict(one=1, two=2)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ConfigDarkMode(TypedDict, total=False):
    dark_mode: bool</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.dict</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="termuxgui.connection.ConfigDarkMode.dark_mode"><code class="name">var <span class="ident">dark_mode</span> : bool</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="termuxgui.connection.Configuration"><code class="flex name class">
<span>class <span class="ident">Configuration</span></span>
<span>(</span><span>*args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>dict() -&gt; new empty dictionary
dict(mapping) -&gt; new dictionary initialized from a mapping object's
(key, value) pairs
dict(iterable) -&gt; new dictionary initialized as if via:
d = {}
for k, v in iterable:
d[k] = v
dict(**kwargs) -&gt; new dictionary initialized with the name=value pairs
in the keyword argument list.
For example:
dict(one=1, two=2)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Configuration(ConfigDarkMode, TypedDict):
    country: str
    language: str
    orientation: Literal[&#34;landscape&#34;, &#34;portrait&#34;]
    keyboardHidden: bool
    screenwidth: int
    screenheight: int
    fontscale: float
    density: float</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.dict</li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="termuxgui.connection.Configuration.country"><code class="name">var <span class="ident">country</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="termuxgui.connection.Configuration.dark_mode"><code class="name">var <span class="ident">dark_mode</span> : bool</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="termuxgui.connection.Configuration.density"><code class="name">var <span class="ident">density</span> : float</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="termuxgui.connection.Configuration.fontscale"><code class="name">var <span class="ident">fontscale</span> : float</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="termuxgui.connection.Configuration.keyboardHidden"><code class="name">var <span class="ident">keyboardHidden</span> : bool</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="termuxgui.connection.Configuration.language"><code class="name">var <span class="ident">language</span> : str</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="termuxgui.connection.Configuration.orientation"><code class="name">var <span class="ident">orientation</span> : Literal['landscape', 'portrait']</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="termuxgui.connection.Configuration.screenheight"><code class="name">var <span class="ident">screenheight</span> : int</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="termuxgui.connection.Configuration.screenwidth"><code class="name">var <span class="ident">screenwidth</span> : int</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="termuxgui.connection.Connection"><code class="flex name class">
<span>class <span class="ident">Connection</span></span>
</code></dt>
<dd>
<div class="desc"><p>This represents a connection to the Termux:GUI plugin and contains all functions that don't act on any
particular View, Activity or Task. </p>
<p>When a connection can't be established, a RuntimeError is raised.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Connection:
    &#34;&#34;&#34;This represents a connection to the Termux:GUI plugin and contains all functions that don&#39;t act on any
    particular View, Activity or Task. &#34;&#34;&#34;

    def __init__(self):
        &#34;&#34;&#34;When a connection can&#39;t be established, a RuntimeError is raised.&#34;&#34;&#34;
        adrMain = &#39;&#39;.join(choice(ascii_letters + digits) for i in range(50))
        adrEvent = &#39;&#39;.join(choice(ascii_letters + digits) for i in range(50))
        mainss = socket(AF_UNIX, SOCK_STREAM)
        eventss = socket(AF_UNIX, SOCK_STREAM)
        with mainss, eventss:
            mainss.bind(&#39;\0&#39; + adrMain)
            eventss.bind(&#39;\0&#39; + adrEvent)
            mainss.listen(1)
            eventss.listen(1)
            mainss.settimeout(5)
            eventss.settimeout(5)
            run([&#34;am&#34;, &#34;broadcast&#34;, &#34;-n&#34;, &#34;com.termux.gui/.GUIReceiver&#34;, &#34;--es&#34;, &#34;mainSocket&#34;, adrMain, &#34;--es&#34;,
                 &#34;eventSocket&#34;, adrEvent], stdout=DEVNULL, stderr=DEVNULL)
            try:
                main = mainss.accept()[0]
                try:
                    event = eventss.accept()[0]
                    try:
                        # check for the termux uid to see if it is really the plugin that has connected
                        if not _check_user(main) or not _check_user(event):
                            main.close()
                            event.close()
                            raise RuntimeError(&#34;Plugin doesn&#39;t have the same UID&#34;)
                        main.sendall(b&#39;\x01&#39;)
                        ret = b&#39;&#39;
                        while len(ret) == 0:
                            ret = ret + main.recv(1)
                        if ret[0] != 0:
                            main.close()
                            event.close()
                            raise RuntimeError(&#34;Invalid Protocol version response&#34;)
                        self._main = main
                        self._event = event
                    except Exception as e:
                        event.close()
                        raise e
                except Exception as e:
                    main.close()
                    raise e
            except timeout:
                raise RuntimeError(&#34;Could not connect to Termux:GUI. Is the plugin installed?&#34;)

    def events(self) -&gt; Iterator[Event]:
        &#34;&#34;&#34;Waits for events. Use this with &#34;for in&#34; to iterate over incoming events and block while waiting.&#34;&#34;&#34;
        while True:
            yield Event(tgmsg.read_msg(self._event))

    def checkevent(self) -&gt; Optional[Event]:
        &#34;&#34;&#34;If there is at least one event to be read, returns it.
        If there is no event, returns None.
        You can use this to e.g. check for events between drawing a frame instead of
        having to use a separate thread and blocking it.&#34;&#34;&#34;
        r, _, _ = select([self._event], [], [], 0)
        if len(r) != 0:
            return Event(tgmsg.read_msg(self._event))

    def toast(self, text: str, long: bool = False):
        &#34;&#34;&#34;Sends a Toast. Set long to True if you want to display the text for longer.&#34;&#34;&#34;
        self.send_msg({&#34;method&#34;: &#34;toast&#34;, &#34;params&#34;: {&#34;text&#34;: text, &#34;long&#34;: long}})

    def totermux(self):
        &#34;&#34;&#34;Returns to the termux task. This is a shorthand for running &#34;am start&#34; to start the termux activity.&#34;&#34;&#34;
        run([&#34;am&#34;, &#34;start&#34;, &#34;-n&#34;, &#34;com.termux/.app.TermuxActivity&#34;], stdout=DEVNULL, stderr=DEVNULL)

    def close(self):
        &#34;&#34;&#34;Closes the connection.

        The connection is automatically closed when the program exits, but it&#39;s good practice to close the connection
        yourself when you don&#39;t need it anymore or use a &#34;with&#34; statement.&#34;&#34;&#34;
        self._main.close()
        self._event.close()

    def __enter__(self):
        return self

    def __exit__(self, type, value, traceback):
        self.close()
        return False

    def send_msg(self, msg: Union[str, dict]):
        &#34;&#34;&#34;Send a message to the main socket.
        You should only need to call this yourself if you want to use methods not yet implemented in the library.&#34;&#34;&#34;
        if type(msg) is dict:
            msg = dumps(msg)
        tgmsg.send_msg(self._main, msg)

    def read_msg(self) -&gt; Any:
        &#34;&#34;&#34;Read a message from the main socket.
        You should only need to call this yourself if you want to use methods not yet implemented in the library.&#34;&#34;&#34;
        return tgmsg.read_msg(self._main)

    def send_read_msg(self, msg: Union[str, dict]):
        &#34;&#34;&#34;Send a message to the main socket and read a message afterwards.
        You should only need to call this yourself if you want to use methods not yet implemented in the library.&#34;&#34;&#34;
        self.send_msg(msg)
        return self.read_msg()

    def turnscreenon(self):
        &#34;&#34;&#34;Turns the screen on.&#34;&#34;&#34;
        self.send_msg({&#34;method&#34;: &#34;turnScreenOn&#34;, &#34;params&#34;: {}})

    def islocked(self) -&gt; bool:
        &#34;&#34;&#34;Returns whether the device is locked.&#34;&#34;&#34;
        return self.send_read_msg({&#34;method&#34;: &#34;isLocked&#34;, &#34;params&#34;: {}})

    def getversion(self) -&gt; bool:
        &#34;&#34;&#34;Returns the version code of the plugin app.
        Can be used to disable features only present in a newer version or prompting the user to update.&#34;&#34;&#34;
        return self.send_read_msg({&#34;method&#34;: &#34;getVersion&#34;, &#34;params&#34;: {}})</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="termuxgui.connection.Connection.checkevent"><code class="name flex">
<span>def <span class="ident">checkevent</span></span>(<span>self) ‑> Optional[<a title="termuxgui.event.Event" href="event.html#termuxgui.event.Event">Event</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>If there is at least one event to be read, returns it.
If there is no event, returns None.
You can use this to e.g. check for events between drawing a frame instead of
having to use a separate thread and blocking it.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def checkevent(self) -&gt; Optional[Event]:
    &#34;&#34;&#34;If there is at least one event to be read, returns it.
    If there is no event, returns None.
    You can use this to e.g. check for events between drawing a frame instead of
    having to use a separate thread and blocking it.&#34;&#34;&#34;
    r, _, _ = select([self._event], [], [], 0)
    if len(r) != 0:
        return Event(tgmsg.read_msg(self._event))</code></pre>
</details>
</dd>
<dt id="termuxgui.connection.Connection.close"><code class="name flex">
<span>def <span class="ident">close</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Closes the connection.</p>
<p>The connection is automatically closed when the program exits, but it's good practice to close the connection
yourself when you don't need it anymore or use a "with" statement.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def close(self):
    &#34;&#34;&#34;Closes the connection.

    The connection is automatically closed when the program exits, but it&#39;s good practice to close the connection
    yourself when you don&#39;t need it anymore or use a &#34;with&#34; statement.&#34;&#34;&#34;
    self._main.close()
    self._event.close()</code></pre>
</details>
</dd>
<dt id="termuxgui.connection.Connection.events"><code class="name flex">
<span>def <span class="ident">events</span></span>(<span>self) ‑> Iterator[<a title="termuxgui.event.Event" href="event.html#termuxgui.event.Event">Event</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>Waits for events. Use this with "for in" to iterate over incoming events and block while waiting.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def events(self) -&gt; Iterator[Event]:
    &#34;&#34;&#34;Waits for events. Use this with &#34;for in&#34; to iterate over incoming events and block while waiting.&#34;&#34;&#34;
    while True:
        yield Event(tgmsg.read_msg(self._event))</code></pre>
</details>
</dd>
<dt id="termuxgui.connection.Connection.getversion"><code class="name flex">
<span>def <span class="ident">getversion</span></span>(<span>self) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the version code of the plugin app.
Can be used to disable features only present in a newer version or prompting the user to update.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def getversion(self) -&gt; bool:
    &#34;&#34;&#34;Returns the version code of the plugin app.
    Can be used to disable features only present in a newer version or prompting the user to update.&#34;&#34;&#34;
    return self.send_read_msg({&#34;method&#34;: &#34;getVersion&#34;, &#34;params&#34;: {}})</code></pre>
</details>
</dd>
<dt id="termuxgui.connection.Connection.islocked"><code class="name flex">
<span>def <span class="ident">islocked</span></span>(<span>self) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Returns whether the device is locked.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def islocked(self) -&gt; bool:
    &#34;&#34;&#34;Returns whether the device is locked.&#34;&#34;&#34;
    return self.send_read_msg({&#34;method&#34;: &#34;isLocked&#34;, &#34;params&#34;: {}})</code></pre>
</details>
</dd>
<dt id="termuxgui.connection.Connection.read_msg"><code class="name flex">
<span>def <span class="ident">read_msg</span></span>(<span>self) ‑> Any</span>
</code></dt>
<dd>
<div class="desc"><p>Read a message from the main socket.
You should only need to call this yourself if you want to use methods not yet implemented in the library.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def read_msg(self) -&gt; Any:
    &#34;&#34;&#34;Read a message from the main socket.
    You should only need to call this yourself if you want to use methods not yet implemented in the library.&#34;&#34;&#34;
    return tgmsg.read_msg(self._main)</code></pre>
</details>
</dd>
<dt id="termuxgui.connection.Connection.send_msg"><code class="name flex">
<span>def <span class="ident">send_msg</span></span>(<span>self, msg: Union[str, dict])</span>
</code></dt>
<dd>
<div class="desc"><p>Send a message to the main socket.
You should only need to call this yourself if you want to use methods not yet implemented in the library.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def send_msg(self, msg: Union[str, dict]):
    &#34;&#34;&#34;Send a message to the main socket.
    You should only need to call this yourself if you want to use methods not yet implemented in the library.&#34;&#34;&#34;
    if type(msg) is dict:
        msg = dumps(msg)
    tgmsg.send_msg(self._main, msg)</code></pre>
</details>
</dd>
<dt id="termuxgui.connection.Connection.send_read_msg"><code class="name flex">
<span>def <span class="ident">send_read_msg</span></span>(<span>self, msg: Union[str, dict])</span>
</code></dt>
<dd>
<div class="desc"><p>Send a message to the main socket and read a message afterwards.
You should only need to call this yourself if you want to use methods not yet implemented in the library.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def send_read_msg(self, msg: Union[str, dict]):
    &#34;&#34;&#34;Send a message to the main socket and read a message afterwards.
    You should only need to call this yourself if you want to use methods not yet implemented in the library.&#34;&#34;&#34;
    self.send_msg(msg)
    return self.read_msg()</code></pre>
</details>
</dd>
<dt id="termuxgui.connection.Connection.toast"><code class="name flex">
<span>def <span class="ident">toast</span></span>(<span>self, text: str, long: bool = False)</span>
</code></dt>
<dd>
<div class="desc"><p>Sends a Toast. Set long to True if you want to display the text for longer.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def toast(self, text: str, long: bool = False):
    &#34;&#34;&#34;Sends a Toast. Set long to True if you want to display the text for longer.&#34;&#34;&#34;
    self.send_msg({&#34;method&#34;: &#34;toast&#34;, &#34;params&#34;: {&#34;text&#34;: text, &#34;long&#34;: long}})</code></pre>
</details>
</dd>
<dt id="termuxgui.connection.Connection.totermux"><code class="name flex">
<span>def <span class="ident">totermux</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns to the termux task. This is a shorthand for running "am start" to start the termux activity.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def totermux(self):
    &#34;&#34;&#34;Returns to the termux task. This is a shorthand for running &#34;am start&#34; to start the termux activity.&#34;&#34;&#34;
    run([&#34;am&#34;, &#34;start&#34;, &#34;-n&#34;, &#34;com.termux/.app.TermuxActivity&#34;], stdout=DEVNULL, stderr=DEVNULL)</code></pre>
</details>
</dd>
<dt id="termuxgui.connection.Connection.turnscreenon"><code class="name flex">
<span>def <span class="ident">turnscreenon</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Turns the screen on.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def turnscreenon(self):
    &#34;&#34;&#34;Turns the screen on.&#34;&#34;&#34;
    self.send_msg({&#34;method&#34;: &#34;turnScreenOn&#34;, &#34;params&#34;: {}})</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="termuxgui" href="index.html">termuxgui</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="termuxgui.connection.ConfigDarkMode" href="#termuxgui.connection.ConfigDarkMode">ConfigDarkMode</a></code></h4>
<ul class="">
<li><code><a title="termuxgui.connection.ConfigDarkMode.dark_mode" href="#termuxgui.connection.ConfigDarkMode.dark_mode">dark_mode</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="termuxgui.connection.Configuration" href="#termuxgui.connection.Configuration">Configuration</a></code></h4>
<ul class="two-column">
<li><code><a title="termuxgui.connection.Configuration.country" href="#termuxgui.connection.Configuration.country">country</a></code></li>
<li><code><a title="termuxgui.connection.Configuration.dark_mode" href="#termuxgui.connection.Configuration.dark_mode">dark_mode</a></code></li>
<li><code><a title="termuxgui.connection.Configuration.density" href="#termuxgui.connection.Configuration.density">density</a></code></li>
<li><code><a title="termuxgui.connection.Configuration.fontscale" href="#termuxgui.connection.Configuration.fontscale">fontscale</a></code></li>
<li><code><a title="termuxgui.connection.Configuration.keyboardHidden" href="#termuxgui.connection.Configuration.keyboardHidden">keyboardHidden</a></code></li>
<li><code><a title="termuxgui.connection.Configuration.language" href="#termuxgui.connection.Configuration.language">language</a></code></li>
<li><code><a title="termuxgui.connection.Configuration.orientation" href="#termuxgui.connection.Configuration.orientation">orientation</a></code></li>
<li><code><a title="termuxgui.connection.Configuration.screenheight" href="#termuxgui.connection.Configuration.screenheight">screenheight</a></code></li>
<li><code><a title="termuxgui.connection.Configuration.screenwidth" href="#termuxgui.connection.Configuration.screenwidth">screenwidth</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="termuxgui.connection.Connection" href="#termuxgui.connection.Connection">Connection</a></code></h4>
<ul class="two-column">
<li><code><a title="termuxgui.connection.Connection.checkevent" href="#termuxgui.connection.Connection.checkevent">checkevent</a></code></li>
<li><code><a title="termuxgui.connection.Connection.close" href="#termuxgui.connection.Connection.close">close</a></code></li>
<li><code><a title="termuxgui.connection.Connection.events" href="#termuxgui.connection.Connection.events">events</a></code></li>
<li><code><a title="termuxgui.connection.Connection.getversion" href="#termuxgui.connection.Connection.getversion">getversion</a></code></li>
<li><code><a title="termuxgui.connection.Connection.islocked" href="#termuxgui.connection.Connection.islocked">islocked</a></code></li>
<li><code><a title="termuxgui.connection.Connection.read_msg" href="#termuxgui.connection.Connection.read_msg">read_msg</a></code></li>
<li><code><a title="termuxgui.connection.Connection.send_msg" href="#termuxgui.connection.Connection.send_msg">send_msg</a></code></li>
<li><code><a title="termuxgui.connection.Connection.send_read_msg" href="#termuxgui.connection.Connection.send_read_msg">send_read_msg</a></code></li>
<li><code><a title="termuxgui.connection.Connection.toast" href="#termuxgui.connection.Connection.toast">toast</a></code></li>
<li><code><a title="termuxgui.connection.Connection.totermux" href="#termuxgui.connection.Connection.totermux">totermux</a></code></li>
<li><code><a title="termuxgui.connection.Connection.turnscreenon" href="#termuxgui.connection.Connection.turnscreenon">turnscreenon</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>